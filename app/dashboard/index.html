<!DOCTYPE html>
<!-- saved from url=(0046)http://sep.wempec.wisc.edu/dash/appliance1.php -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>S.M.A.R.T Energy Manager</title></head>

<style type="text/css">
    #set-schd,#remove-schd{
        /*width:30%;*/
        font-size: 17px;
        padding: 5px 13px;
        border-radius: 5px;
        border: none;
        background-color: #7fbfff;
        color: white;
    }
    #remove-schd{
        background-color: #5cb85c;
    }
    .dropdown{
        width: 30%;
        padding: 5px;
    }
    #start-button{
        padding-top: 13%;
        color: green;
    }
    #end-button{
        padding-top: 13%;
        color: red;
    }
</style>

    <!-- Bootstrap Core CSS -->
    <link href="./assets/javascript/bootstrap.min.css" rel="stylesheet">

     <link href="./assets/javascript/bootstrap-theme.min.css" rel="stylesheet">


    <!-- MetisMenu CSS -->
    <link href="./assets/javascript/metisMenu.min.css" rel="stylesheet">

    <!-- Timeline CSS -->
    <link href="./assets/javascript/timeline.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="./assets/javascript/sb-admin-2.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="./assets/javascript/morris.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="./assets/javascript/font-awesome.min.css" rel="stylesheet" type="text/css">



   
    <!-- Slider CSS -->
    <link rel="stylesheet" href="./assets/javascript/iThing.css" type="text/css">



    <!-- Full calendar CSS -->
    <link rel="stylesheet" href="./assets/javascript/fullcalendar.css">

    <!-- Full calendar CSS -->
    <link rel="stylesheet" href="./assets/javascript/bootstrap-clockpicker.min.css">

    <!-- Full calendar CSS -->
    <link rel="stylesheet" href="./assets/javascript/jquery-clockpicker.min.css">

    <!-- Full calendar CSS -->
    <link rel="stylesheet" href="./assets/javascript/clockpicker.css">

    <!-- Full calendar CSS -->
    <link rel="stylesheet" href="./assets/javascript/standalone.css">

    <!-- Bootstrap Clockpicker CSS -->
    <link rel="stylesheet" href="./assets/javascript/bootstrap-clockpicker.min.css">

     <!-- JQUERY Clockpicker CSS -->
    <link rel="stylesheet" href="./assets/javascript/jquery-clockpicker.min.css">

    <!-- Clockpicker CSS -->
    <link rel="stylesheet" href="./assets/javascript/clockpicker.css">

     <!-- Standalone CSS -->
    <link rel="stylesheet" href="./assets/javascript/standalone.css">







    <!-- JQuery UI library JS -->
    <script src="./assets/javascript/jquery.js"></script><style type="text/css"></style>

    <!-- JQuery Custom Library JS -->
    <script src="./assets/javascript/jquery-ui.custom.js"></script>

    <!-- Bootstrap JS  -->
    <script src="./assets/javascript/bootstrap.min.js"></script>

       <!-- Pinoccio API JS -->
    <script src="./assets/javascript/pinoccio.js"></script>

    <!-- Full Calendar Moment Library JS -->
    <script src="./assets/javascript/moment.min.js"></script>

    <!-- Full Calendar Library JS-->
    <script src="./assets/javascript/fullcalendar.js"></script>

    <!-- Full Calendar Library MIN JS -->
    <script src="./assets/javascript/fullcalendar.min.js"></script>




    <!-- JQ Edit Range Slider -->
    <script src="./assets/javascript/jQEditRangeSlider-min.js"></script>

    <!-- JQ Edit Date Slider -->
    <script src="./assets/javascript/jQDateRangeSlider-min.js"></script>

    <!-- JQ Edit Date Slider with ruler -->
    <script src="./assets/javascript/jQDateRangeSlider-withRuler-min.js"></script>

    

     <!-- Bootstrap clockpicker JS -->
    <script src="./assets/javascript/bootstrap-clockpicker.min.js"></script>

     <!-- Jquery Bootstrap Clockpicker -->
    <script src="./assets/javascript/jquery-clockpicker.min.js"></script>

     <!-- Gulpfile Bootstrap JS -->
    <script src="./assets/javascript/gulpfile.js"></script>

    <!-- Clockpicker JS -->
    <script src="./assets/javascript/clockpicker.js"></script>

    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="./assets/javascript/jquery-ui-calendar.js"></script>

   
    <script> 

          
    $(function() {
        $( "#from" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 1,
            onClose: function( selectedDate ) {
                $( "#to" ).datepicker( "option", "minDate", selectedDate );
            }
        });

        $( "#to" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 1,
            onClose: function( selectedDate ) {
                $( "#from" ).datepicker( "option", "maxDate", selectedDate );
            }
        });
    });

        // schedule button active
        
    $(document).ready(function() {
    
        $("#appliance-dropdown").change(function() { 
            if (this.value == "xx") {
                $("#set-schd").prop("disabled", true);
                $("#set-schd").css("background-color","#7fbfff");
                $("#remove-schd").prop("disabled", true);
                $("#remove-schd").css("background-color","#5cb85c");
            } else {
                $("#set-schd").prop("disabled", false);
                $("#set-schd").css("background-color","#357ebd");
                $("#remove-schd").prop("disabled", false);
                $("#remove-schd").css("background-color","green");
            }
        });
                       
        var input1 = $('#input-start'); // Script for appliance start time
        input1.clockpicker({
            autoclose: true
        });


                        /* var input2 = $('#input-end'); // Script for appliance start time
                        input2.clockpicker({
                        autoclose: true
                        });*/

                        var input = $('#input-end').clockpicker({
                            donetext: 'Done',
                            init: function() { 
                                console.log("colorpicker initiated");
                            },
                            beforeShow: function() {
                                console.log("before show");
                            },
                            afterShow: function() {
                                console.log("after show");
                            },
                            beforeHide: function() {
                                console.log("before hide");
                            },
                            afterHide: function() {
                                console.log("after hide");
                            },
                            beforeHourSelect: function() {
                                console.log("before hour selected");
                            },
                            afterHourSelect: function() {
                                console.log("after hour selected");
                            },
                            beforeDone: function() {
                                console.log("before done");
                            },
                            afterDone: function() {
                                console.log("after done");
                            }
                        });

                        $("#set-schd").click(function(){
                            console.log("clicked");
                            // var basicValues = $("#slider").rangeSlider("values");
                            var tempapp = $("#appliance-dropdown").val();
                            var time_start = document.getElementById('input-start').value;
                            var time_end = document.getElementById('input-end').value;
                            var date_start = document.getElementById('from').value;
                            var date_end = document.getElementById('to').value;
                            if(date_end == "") date_end = date_start;

                            $.ajax({
                                type: "POST",
                                url: "/abcd",
                                data: {
                                    id: tempapp,
                                    start_time : time_start,
                                    end_time : time_end,
                                    start_date : date_start,
                                    end_date : date_end,
                                    
                                },
                                // contentType: "application/json",
                                success: function(result) {
                                    console.log("Response " + JSON.stringify(result));
                                    if(result.success == "success"){
                                        alert ("My Job is done!! Yipee");
                                        displayCalendar();
                                    }
                                },
                                error : function(request, textStatus, errorThrown) {
                                    console.log('textStatus ' + textStatus);
                                    console.log('errorThrown ' + errorThrown);
                                },
                                dataType: "json"                            
                            });
                        
                        });

                        $("#remove-schd").click(function(){
                            console.log("clicked");
                            // var basicValues = $("#slider").rangeSlider("values");
                            var tempapp = $("#appliance-dropdown").val();
                            var time_start = document.getElementById('input-start').value;
                            var time_end = document.getElementById('input-end').value;
                            var date_start = document.getElementById('from').value;
                            var date_end = document.getElementById('to').value;
                            if(date_end == "") date_end = date_start;

                            $.ajax({
                                type: "POST",
                                url: "/remove",
                                data: {
                                    id: tempapp,
                                    start_time : time_start,
                                    end_time : time_end,
                                    start_date : date_start,
                                    end_date : date_end,
                                    
                                },
                                // contentType: "application/json",
                                success: function(result) {
                                    console.log("Response " + JSON.stringify(result));
                                    if(result.success == "success"){
                                        alert ("My Job is done!! Yipee");
                                        displayCalendar();
                                    }
                                },
                                error : function(request, textStatus, errorThrown) {
                                    console.log('textStatus ' + textStatus);
                                    console.log('errorThrown ' + errorThrown);
                                },
                                dataType: "json"                            
                            });
                        
                        });

                        function displayCalendar() {
                            
                            $.ajax({
                                type: "POST",
                                url: "/abc",
                                // contentType: "application/json",
                                success: function(result) {
                                    var index = result.length;
                                    console.log("Response " + JSON.stringify(result));
                                    processcalendar(index,result);
                                    // alert ("My Job2 is done!! Yipee");
                                },
                                error : function(request, textStatus, errorThrown) {
                                    console.log('textStatus ' + textStatus);
                                    console.log('errorThrown ' + errorThrown);
                                },
                                // dataType: "json"                            
                            });
                        };
                          // displayCalendar();

                        function processcalendar (index,rows){
                            var accounting = [];
                            for(var i in rows) {
                                var item = rows[i];
                                accounting.push({ 
                                    "title" : item.username,
                                    "start"  : item.startdate,
                                    "end"       : item.enddate 
                                });
                            }

                            $("#calendar").fullCalendar({
                                // put your options and callbacks here
                                events: accounting,
                                color: 'yellow',   // an option!
                                textColor: 'black' // an option!
                                });
                        };

                        
                    }); // End of Document Ready Function for Clockpicker     

            </script>



</head>

<body>
 
    
    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://sep.wempec.wisc.edu/dash/dashboard.php">Microgrid Energy Manager</a>
            </div>
            

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                    
                        <li>
                            <a class="active" href="http://sep.wempec.wisc.edu/dash/dashboard.php"> Scheduling</a>
                        </li>

                                                
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
       </nav> <!-- navbar navbar-default navbar-static-top -->


        <div id="page-wrapper">
            <div class="row">
                
                <div class="col-lg-12">
                    <h1 class="page-header">Microgrid Energy Manager</h1>
                </div>

                <!-- /.col-lg-12 -->
            </div>

           
            <div class="row">
              
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <i class="fa fa-bar-chart-o fa-fw"></i> Select Source or Load
                        </div>
                    <!-- /.panel-heading -->


                            <br>

                  

                            <div class="text-center" >
                                       
                                <select class="dropdown" name="appliance1" id="appliance-dropdown">
                                    <option value="xx" selected>Select Source Or Load</option>
                                    <option value="light">Light</option>
                                    <option value="bulb">Bulb</option>
                                    <option value="laptop">Laptop</option>
                                </select>

                
                                        <br><br>

                            </div>
   

                            <div class="text-center">
                            

                                <nav class="navbar navbar-default" role="navigation">
     
                                <h4><b> Scheduling Assistant</b></h4>
      
                                </nav>
                                    

                                <p class="text-info"><em><b>Select Date(s)</b></em></p><br>
                                <div class="row">
                                    <div class="col-lg-1"></div>
                                    <div class="col-lg-1">
                                        <label id="start-button">FROM</label>
                                    </div>
                                    <div class="col-lg-4">
                                        <input type="text" id="from" name="from" placeholder="yyyy-mm-dd" class="form-control" style="z-index:0;">
                                    </div>
                                    <div class="col-lg-1">
                                        <label id="end-button">TO</label>
                                    </div>
                                    <div class="col-lg-4">
                                        <input type="text" id="to" name="to" placeholder="yyyy-mm-dd" class="form-control" style="z-index:0;">
                                    </div>
                                    <div class="col-lg-1"></div>

                                    <br><br><br>
                    
                                    <p class="text-success"><em><b>Select Time</b></em></p><br>
                                </div>

                                <div class="row">
                                        <div class="col-lg-1"></div>
                                        <div class="col-lg-1">
                                            <label id="start-button">START</label>
                                        </div>

                                        <div class="col-lg-4">

                                                <div class="input-group clockpicker" data-placement="left" data-align="top" data-autoclose="true">
                                                    <input type="text" id="input-start" class="form-control" placeholder="hh:mm" style="z-index:0;">
                                                    <span class="input-group-addon">
                                                         <span class="glyphicon glyphicon-time"></span>
                                                     </span>

                                                   
                                                </div>
                                         </div>


                                        <div class="col-lg-1">
                                           <label id="end-button">END</label>
                                        </div>



                                         <div class="col-lg-4">

                                                <div class="input-group clockpicker" data-placement="left" data-align="top" data-autoclose="true">
                                                    <input type="text" id="input-end" class="form-control" placeholder="hh:mm" style="z-index:0;">
                                                    <span class="input-group-addon">
                                                         <span class="glyphicon glyphicon-time"></span>
                                                     </span>

                                                   
                                                </div>
                                         </div>




                                     

                                </div> <!-- End of row -->
                               

                                <br><br>

                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="submit" id="set-schd" value="Schedule" disabled>
                                    </div>
                                    <div class="col-lg-6">
                                        <input type="submit" id="remove-schd" value="Remove" disabled>
                                    </div>
                                </div>

                                <Br><br>
                                        
                            </div>   
                          
                       
                    </div> <!-- End of Panel Panel-Default -->

<br><br>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-bar-chart-o fa-fw"></i> Appliance Schedule
                           
                        </div>
                        <!-- /.panel-heading -->


                        <div class="panel-body">
                            <div class="row">
                             
                             <div id="calendar"></div>
                             
                            <!-- /.row -->
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->

            
 

            </div>
            <!-- /.row -->

          
        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery Version 1.11.0 -->
     <!-- <script src="js/jquery-1.11.0.js"></script> -->

    <!-- Bootstrap Core JavaScript -->
    <script src="./assets/javascript/bootstrap.min(1).js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="./assets/javascript/metisMenu.min.js"></script>

    <!-- Morris Charts JavaScript -->
    <script src="./assets/javascript/raphael.min.js"></script>
    <script src="./assets/javascript/morris.min.js"></script>
    <script src="./assets/javascript/morris-data.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="./assets/javascript/sb-admin-2.js"></script>




</body>

</html>
